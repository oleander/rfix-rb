#!/usr/bin/env ruby

require "rubocop"
require "cri"
require "rfix"
require "rfix/extensions/string"
require "rfix/commands/extensions/options"
require "rfix/commands/helper/loader"

include Rfix::Loader

root = Cri::Command.new

Dir.glob(File.join(__dir__, "../lib/rfix/commands/*.rb")).each do |command|
  root.add_command(Cri::Command.load_file(command, infer_name: true))
end

if root.run(ARGV)
  exit 0
else
  exit 1
end
